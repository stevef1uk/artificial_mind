# Configuration for n8n/MCP Skills
# This file defines skills that are loaded dynamically at startup

skills:
  - id: read_google_data
    name: Read Google Workspace Data
    description: Read emails or calendar events from Google Workspace via n8n integration
    type: n8n_webhook
    endpoint: ${N8N_WEBHOOK_URL}
    method: POST
    auth:
      type: header
      header: X-Webhook-Secret
      secret_env: N8N_WEBHOOK_SECRET
    tls:
      skip_verify: true
    request:
      payload_template: |
        {
          "query": "{{.query}}",
          "type": "{{.type}}",
          "limit": {{.limit | toInt}}
        }
    input_schema:
      query:
        type: string
        description: Search query for emails or calendar events (e.g., 'unread', 'recent', 'today')
        default: ""
      type:
        type: string
        enum: [email, calendar, all]
        description: Type of data to retrieve
        default: email
      limit:
        type: integer
        description: Maximum number of results to return
        minimum: 1
        maximum: 50
        default: 5
    response:
      format: json
      structure:
        type: object
      results_key: results  # Standard key for results array (n8n workflow should return {"results": [...]})
    timeout: 60s
    prompt_hints:
      keywords:
        - email
        - emails
        - check email
        - check emails
        - read email
        - read emails
        - gmail
        - google workspace
        - calendar
        - calendar events
        - inbox
      prompt_text: "⚠️ FOR EMAIL/CALENDAR REQUESTS: You MUST use mcp_read_google_data tool. DO NOT generate fake email content. DO NOT hallucinate emails."
      force_tool_call: true
      always_include_keywords:
        - email
        - emails
        - calendar
        - inbox
        - gmail
        - check my
      reject_text_response: true

